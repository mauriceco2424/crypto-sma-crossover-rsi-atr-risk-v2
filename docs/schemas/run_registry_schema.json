{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Run Registry Schema",
  "description": "Schema for run_registry.csv entries",
  "type": "object",
  "properties": {
    "run_id": {"type": "string", "pattern": "^[a-zA-Z0-9_-]+$"},
    "universe_id": {"type": "string"},
    "date_start": {"type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$"},
    "date_end": {"type": "string", "pattern": "^\\d{4}-\\d{2}-\\d{2}$"},
    "config_path": {"type": "string"},
    "config_hash": {"type": "string", "pattern": "^[a-f0-9]{64}$"},
    "data_hash": {"type": "string", "pattern": "^[a-f0-9]{64}$"},
    "engine_version": {"type": "string"},
    "strat_version": {"type": "string"},
    "seed": {"type": "integer", "minimum": 0},
    "fees_model": {"type": "string"},
    "parent_run_id": {"type": ["string", "null"]},
    "status": {"type": "string", "enum": ["pending", "running", "completed", "failed", "halted"]},
    "start_time_utc": {"type": "string", "format": "date-time"},
    "end_time_utc": {"type": ["string", "null"], "format": "date-time"},
    "cagr": {"type": ["number", "null"]},
    "sortino": {"type": ["number", "null"]},
    "sharpe": {"type": ["number", "null"]},
    "max_dd": {"type": ["number", "null"], "minimum": 0, "maximum": 1},
    "exposure": {"type": ["number", "null"], "minimum": 0, "maximum": 1},
    "n_trades": {"type": ["integer", "null"], "minimum": 0},
    "win_rate": {"type": ["number", "null"], "minimum": 0, "maximum": 1},
    "avg_gain": {"type": ["number", "null"]},
    "avg_loss": {"type": ["number", "null"]},
    "notes": {"type": ["string", "null"]}
  },
  "required": ["run_id", "universe_id", "date_start", "date_end", "config_path", "config_hash", "engine_version", "seed", "status"]
}